{"version":3,"names":[],"mappings":"","sources":["consulting/factories/consulting-quest-factory.js"],"sourcesContent":["(function () {\n  'use strict';\n\n  angular.module('consulting')\n    .factory('ConsultingQuest', ConsultingQuest);\n\n  ConsultingQuest.$inject = ['$q', '$httpParamSerializerJQLike', '$state', 'APP_CONFIG', 'InApiUtils', 'DataAdapter', 'StorageAPI'];\n\n  function ConsultingQuest($q, $httpParamSerializerJQLike, $state, APP_CONFIG, InApiUtils, DataAdapter, StorageAPI) {\n    var service = {}, apiUrls;\n\n    apiUrls = {\n      questPost: APP_CONFIG.consultingPostUrl\n    };\n\n    function doPost(postParams) {\n      var defer, config;\n\n      if (!StorageAPI.isTokenValid('me')) {\n        defer = $q.defer();\n        defer.reject(InApiUtils.generateErrPack('r8999', 'The access token is expired.'));\n\n        $state.go(APP_CONFIG.loginState);\n\n        return defer.promise;\n      }\n\n      config = {\n        method: 'POST',\n        url: apiUrls.questPost,\n        data: $httpParamSerializerJQLike(postParams),\n        headers: {\n          Authorization: 'Bearer ' + StorageAPI.getToken('me').accessToken\n        }\n      };\n\n      return DataAdapter.requestRemoteSvr(config);\n    }\n\n    service.doPost = doPost;\n\n    return service;\n  }\n}());\n"],"file":"consulting-quest-factory.js"}