{"version":3,"names":[],"mappings":"","sources":["devicelog/factories/device-profile-factory.js"],"sourcesContent":["(function () {\n  'use strict';\n\n  angular.module('devicelog')\n    .factory('DeviceProfile', DeviceProfile);\n\n  DeviceProfile.$inject = [];\n\n  function DeviceProfile() {\n    var service = {}, profileMap;\n\n    profileMap = {\n      900: {\n        devLinkType: 'Zigbee',\n        devTypeName: '無線迷你閘道器',\n        devModel: 'F-GW-600-ZE',\n        hasDevLog: false\n      },\n      '0910': {\n        devLinkType: 'Zigbee',\n        devTypeName: '雲端智慧無線插座',\n        devModel: 'PAN17',\n        hasDevLog: true\n      },\n      212: {\n        devLinkType: 'Zigbee',\n        devTypeName: '雲端溫溼度計',\n        devModel: 'SG110-A',\n        hasDevLog: true\n      },\n      22: {\n        devLinkType: 'Zigbee',\n        devTypeName: '雲端紅外線動態感應器',\n        devModel: 'SPM-05',\n        hasDevLog: true\n      },\n      292: {\n        devLinkType: 'Zigbee',\n        devTypeName: '雲端警報器',\n        devModel: 'PSE03-1',\n        hasDevLog: true\n      }\n    };\n\n    function getProfile(data) {\n      var profile, devId;\n\n      data = data || {};\n      devId = data.devId;\n\n      if (!data.devId) {\n        return null;\n      }\n\n      profile = profileMap[data.devExtType];\n\n      if (!profile) {\n        profile = {\n          devLinkType: '',\n          devTypeName: '',\n          devModel: '',\n          hasDevLog: false\n        };\n      }\n\n      data.devLinkType = profile.devLinkType;\n      data.devTypeName = profile.devTypeName;\n      data.devModel = profile.devModel;\n      data.hasDevLog = profile.hasDevLog;\n      data.instanceType = devId.toLowerCase().indexOf('sm') === 0 ? '模擬' : '實體';\n      data.connectedState = data.connected ? '連線' : '斷線';\n\n      return data;\n    }\n\n    function formatProfiles(resArray) {\n      var i, cnt, data, formattedArray = [];\n\n      if (!resArray) {\n        return [];\n      }\n\n      cnt = resArray.length;\n\n      for (i = 0; i < cnt; ++i) {\n        data = resArray[i];\n        formattedArray.push(getProfile(data));\n      }\n\n      return formattedArray;\n    }\n\n    service.formatProfiles = formatProfiles;\n\n    return service;\n  }\n}());\n"],"file":"device-profile-factory.js"}